{"ast":null,"code":"import React,{useContext,useEffect}from'react';import{Card,Table,Button,Alert}from'react-bootstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faHeart,faEye,faTrash,faCircle}from'@fortawesome/free-solid-svg-icons';import{UserProfileContext}from'../context/UserProfileContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserFavorites=()=>{const{favorites,loading,error,loadUserProfile,removeFromFavorites,addToWatchHistory}=useContext(UserProfileContext);useEffect(()=>{loadUserProfile();},[loadUserProfile]);const handleRemoveFavorite=async channelId=>{await removeFromFavorites(channelId);};const handleWatchChannel=async channel=>{// Add to watch history\nawait addToWatchHistory(channel._id);// Open channel URL in new tab\nwindow.open(channel.url,'_blank');};if(loading){return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2\",children:\"Loading favorites...\"})]})});}if(error){return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error})})});}return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faHeart,className:\"me-2 text-danger\"}),\"My Favorites\"]})}),/*#__PURE__*/_jsx(Card.Body,{children:favorites.length===0?/*#__PURE__*/_jsx(Alert,{variant:\"info\",children:\"You haven't added any channels to your favorites yet.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",style:{width:'60px'},children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Channel Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Provider\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Format\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",children:\"Added On\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-center\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:favorites.map(favorite=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faCircle,className:favorite.channel.isLive?'channel-status-live':'channel-status-down',size:\"sm\"})}),/*#__PURE__*/_jsx(\"td\",{children:favorite.channel.name}),/*#__PURE__*/_jsx(\"td\",{children:favorite.channel.provider}),/*#__PURE__*/_jsx(\"td\",{children:favorite.channel.format.toUpperCase()}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:new Date(favorite.addedAt).toLocaleDateString()}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline-primary\",size:\"sm\",className:\"me-2\",onClick:()=>handleWatchChannel(favorite.channel),title:\"Watch Channel\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faEye})}),/*#__PURE__*/_jsx(Button,{variant:\"outline-danger\",size:\"sm\",onClick:()=>handleRemoveFavorite(favorite.channel._id),title:\"Remove from Favorites\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTrash})})]})]},favorite._id))})]})})})]});};export default UserFavorites;","map":{"version":3,"names":["React","useContext","useEffect","Card","Table","Button","Alert","FontAwesomeIcon","faHeart","faEye","faTrash","faCircle","UserProfileContext","jsx","_jsx","jsxs","_jsxs","UserFavorites","favorites","loading","error","loadUserProfile","removeFromFavorites","addToWatchHistory","handleRemoveFavorite","channelId","handleWatchChannel","channel","_id","window","open","url","children","Body","className","role","variant","Header","icon","length","striped","bordered","hover","style","width","map","favorite","isLive","size","name","provider","format","toUpperCase","Date","addedAt","toLocaleDateString","onClick","title"],"sources":["/var/www/iptv-manager/frontend/src/components/UserFavorites.js"],"sourcesContent":["import React, { useContext, useEffect } from 'react';\r\nimport { Card, Table, Button, Alert } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faHeart, faEye, faTrash, faCircle } from '@fortawesome/free-solid-svg-icons';\r\nimport { UserProfileContext } from '../context/UserProfileContext';\r\n\r\nconst UserFavorites = () => {\r\n  const { favorites, loading, error, loadUserProfile, removeFromFavorites, addToWatchHistory } = useContext(UserProfileContext);\r\n  \r\n  useEffect(() => {\r\n    loadUserProfile();\r\n  }, [loadUserProfile]);\r\n  \r\n  const handleRemoveFavorite = async (channelId) => {\r\n    await removeFromFavorites(channelId);\r\n  };\r\n  \r\n  const handleWatchChannel = async (channel) => {\r\n    // Add to watch history\r\n    await addToWatchHistory(channel._id);\r\n    \r\n    // Open channel URL in new tab\r\n    window.open(channel.url, '_blank');\r\n  };\r\n  \r\n  if (loading) {\r\n    return (\r\n      <Card>\r\n        <Card.Body className=\"text-center\">\r\n          <div className=\"spinner-border text-primary\" role=\"status\">\r\n            <span className=\"visually-hidden\">Loading...</span>\r\n          </div>\r\n          <p className=\"mt-2\">Loading favorites...</p>\r\n        </Card.Body>\r\n      </Card>\r\n    );\r\n  }\r\n  \r\n  if (error) {\r\n    return (\r\n      <Card>\r\n        <Card.Body>\r\n          <Alert variant=\"danger\">{error}</Alert>\r\n        </Card.Body>\r\n      </Card>\r\n    );\r\n  }\r\n  \r\n  return (\r\n    <Card>\r\n      <Card.Header>\r\n        <h5 className=\"mb-0\">\r\n          <FontAwesomeIcon icon={faHeart} className=\"me-2 text-danger\" />\r\n          My Favorites\r\n        </h5>\r\n      </Card.Header>\r\n      <Card.Body>\r\n        {favorites.length === 0 ? (\r\n          <Alert variant=\"info\">\r\n            You haven't added any channels to your favorites yet.\r\n          </Alert>\r\n        ) : (\r\n          <div className=\"table-responsive\">\r\n            <Table striped bordered hover>\r\n              <thead>\r\n                <tr>\r\n                  <th className=\"text-center\" style={{ width: '60px' }}>Status</th>\r\n                  <th>Channel Name</th>\r\n                  <th>Provider</th>\r\n                  <th>Format</th>\r\n                  <th className=\"text-center\">Added On</th>\r\n                  <th className=\"text-center\">Actions</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {favorites.map((favorite) => (\r\n                  <tr key={favorite._id}>\r\n                    <td className=\"text-center\">\r\n                      <FontAwesomeIcon\r\n                        icon={faCircle}\r\n                        className={favorite.channel.isLive ? 'channel-status-live' : 'channel-status-down'}\r\n                        size=\"sm\"\r\n                      />\r\n                    </td>\r\n                    <td>{favorite.channel.name}</td>\r\n                    <td>{favorite.channel.provider}</td>\r\n                    <td>{favorite.channel.format.toUpperCase()}</td>\r\n                    <td className=\"text-center\">\r\n                      {new Date(favorite.addedAt).toLocaleDateString()}\r\n                    </td>\r\n                    <td className=\"text-center\">\r\n                      <Button\r\n                        variant=\"outline-primary\"\r\n                        size=\"sm\"\r\n                        className=\"me-2\"\r\n                        onClick={() => handleWatchChannel(favorite.channel)}\r\n                        title=\"Watch Channel\"\r\n                      >\r\n                        <FontAwesomeIcon icon={faEye} />\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"outline-danger\"\r\n                        size=\"sm\"\r\n                        onClick={() => handleRemoveFavorite(favorite.channel._id)}\r\n                        title=\"Remove from Favorites\"\r\n                      >\r\n                        <FontAwesomeIcon icon={faTrash} />\r\n                      </Button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </Table>\r\n          </div>\r\n        )}\r\n      </Card.Body>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default UserFavorites;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}